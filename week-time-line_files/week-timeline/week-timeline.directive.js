!function(){"use strict";angular.module("WeekTimelineApp").directive("weekTimeline",function(){function e(e,t,n,a){function r(e){var t=e.target,n=(parseFloat(t.getAttribute("data-x"))||0)+e.dx,a=(parseFloat(t.getAttribute("data-y"))||0)+e.dy;t.style.webkitTransform=t.style.transform="translate("+n+"px, "+a+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",a);var r=Math.floor(n),i=Math.floor(r/60),o=r%60,s=(10>i?"0"+i:i)+":"+(10>o?"0"+o:o);$(t).find("p").html(s)}function i(e,t,n,a){var r=Math.floor(e),i=Math.floor(r/60),o=r%60,s=(10>i?"0"+i:i)+":"+(10>o?"0"+o:o),l="<p> "+s+" </p>",d=document.createElement("div");d.id=a,d.innerHTML=l,d.className="draggable drag-circle",d.style.webkitTransform=d.style.transform="translate("+e+"px, "+t+"px)",d.addEventListener("click",function(e){e.stopPropagation()}),d.setAttribute("data-x",e),d.setAttribute("data-y",t),$("#"+n).append(d)}function o(e){for(var t=0;t<e.length;t++){var n=s++;e[t].id=n,i(e[t].timeInMinutes,0,e[t].day,n)}}var s=1;e.events=[{name:"Event 1",timeInMinutes:120,day:"Monday"},{name:"Event 2",timeInMinutes:420,day:"Monday"},{name:"Event 3",timeInMinutes:220,day:"Tuesday"},{name:"Event 4",timeInMinutes:320,day:"Thursday"}],e.hours=[];for(var l=0;24>=l;l++)e.hours.push(l);interact(".draggable").draggable({inertia:!0,restrict:{restriction:"parent",endOnly:!1,elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:r}),interact(".draggable").on("tap",function(e){e.currentTarget.classList.toggle("switch-bg"),e.preventDefault()}),interact(".draggable").on("doubletap",function(t){var n=t.target,a=null;$(n).is("p")?a=$(n).parent():$(n).is("div")&&(a=$(n));var r=$(a).attr("id");console.log("id to remove "+r);for(var i=0;i<e.events.length;i++)e.events[i].id==r&&(e.events.splice(i,1),$(a).remove())}),e.addElement=function(t,n){var a=t.target,r=t.offsetX-a.offsetLeft,o=0,s=e.events.length+1;i(r,o,n,s),e.events.push({id:s,name:"Event "+s,timeInMinutes:r,day:n})},e.getNumber=function(e){return new Array(e)},e.saveEvents=function(){var t=angular.copy(e.events);console.log(JSON.stringify(t)),alert(JSON.stringify(t))},o(e.events)}var t={link:e,restrict:"E",scope:{events:"=ngModel"},templateUrl:"week-time-line_files/week-timeline/week-timeline.html"};return t})}();